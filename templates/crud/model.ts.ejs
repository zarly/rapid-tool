
export class <%= name.classCase %> {

    init () {
        const query = `
            CREATE SEQUENCE IF NOT EXISTS <%= tableName %>_id_seq;
            CREATE TABLE IF NOT EXISTS <%= tableName %> (
                id int primary key DEFAULT nextval('<%= tableName %>_id_seq'), 
                name text
            );
            ALTER SEQUENCE <%= tableName %>_id_seq OWNED BY <%= tableName %>.id;
            `;
        return query;
    }

    deInit () {
        const query = `
            DROP TABLE IF EXISTS <%= tableName %>;
            DROP SEQUENCE IF EXISTS <%= tableName %>_id_seq;
            `;
        return query;
    }

    seed () {
        const query = 'INSERT INTO <%= tableName %>(name) VALUES($1) RETURNING id';
        return query;
    }

    cleanSeed () {
        const query = 'TRUNCATE TABLE <%= tableName %>';
        return query;
    }

    add (record: any) {
        const query = 'INSERT INTO <%= tableName %>(name) VALUES($1) RETURNING id';
        return query;
    }

    edit (id: number, record: any) {
        const query = 'UPDATE <%= tableName %> SET name = $2 WHERE id = $1';
        return query;
    }

    remove (id: number) {
        return 'DELETE FROM <%= tableName %> WHERE id = $1';
    }

    get (id: number) {
        return 'SELECT * FROM <%= tableName %> WHERE id = $1';
    }

    list (page?: number, pageSize?: number) {
        return 'SELECT * FROM <%= tableName %> ORDER BY id';
    }

    search (page?: number, pageSize?: number, filter?: any, projection?: any) {

    }
}
